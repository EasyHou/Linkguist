<!DOCTYPE html>
<!-- saved from url=(0022)http://localhost:3000/ -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>Linkguist</title>
  <link rel="stylesheet" media="all" href="./Linkguist_files/pages.self-e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855.css" data-turbolinks-track="true">
<link rel="stylesheet" media="all" href="./Linkguist_files/application.self-e80e8f2318043e8af94dddc2adad5a4f09739a8ebb323b3ab31cd71d45fd9113.css" data-turbolinks-track="true">
  <script src="./Linkguist_files/jquery.self-a714331225dda820228db323939889f149aec0127aeb06255646b616ba1ca419.js" data-turbolinks-track="true"></script><style type="text/css"></style>
<script src="./Linkguist_files/jquery_ujs.self-d456baa54c1fa6be2ec3711f0a72ddf7a5b2f34a6b4f515f33767d6207b7d4b3.js" data-turbolinks-track="true"></script>
<script src="./Linkguist_files/turbolinks.self-c37727e9bd6b2735da5c311aa83fead54ed0be6cc8bd9a65309e9c5abe2cbfff.js" data-turbolinks-track="true"></script>
<script src="./Linkguist_files/pages.self-877aef30ae1b040ab8a3aba4e3e309a11d7f2612f44dde450b5c157aa5f95c05.js" data-turbolinks-track="true"></script>
<script src="./Linkguist_files/application.self-3b8dabdc891efe46b9a144b400ad69e37d7e5876bdc39dee783419a69d7ca819.js" data-turbolinks-track="true"></script>
  <meta name="csrf-param" content="authenticity_token">
<meta name="csrf-token" content="eVctYx3LgoQyM5JS/L6SIRNPhjsA8J93LGgJBMAcY90W3J2wC8J0M9bGD2IA69Y6TtAbeSf34ovWH8gldMluFA==">
<style type="text/css">.moxtra-meet { width: 73px; height: 35px; border: solid 1px navy; box-shadow: 2px 2px 3px #535353; border-radius: 5px; cursor: pointer;
 background-image: url('https://www.moxtra.com/api/images/logo-meet2.png'); }
.moxtra-meet:hover { border: solid navy 2px; background-position: 2px 2px; }
.moxtra-meet:active { background-position: 0 2px; }
.moxtra-meet-selected { }
.moxtra-meet-selected:hover { }
.moxtra-meet-selected:active { }</style><style type="text/css">.moxtra-note { width: 76px; height: 35px; border: solid 1px navy; box-shadow: 2px 2px 3px #535353; border-radius: 5px; cursor: pointer;
 background-image: url('https://www.moxtra.com/api/images/logo-note.png'); }
.moxtra-note:hover { border: solid navy 2px; background-position: 2px 2px; }
.moxtra-note:active { background-position: 0 2px; }
.moxtra-note-selected { }
.moxtra-note-selected:hover { }
.moxtra-note-selected:active { }</style><style type="text/css">.moxtra-chat { width: 61px; height: 35px; border: solid 1px navy; box-shadow: 2px 2px 3px #535353; border-radius: 5px; cursor: pointer;
 background-image: url('https://www.moxtra.com/api/images/logo-chat.png'); }
.moxtra-chat:hover { border: solid navy 2px; background-position: 2px 2px; }
.moxtra-chat:active { background-position: 0 2px; }
.moxtra-chat-selected { }
.moxtra-chat-selected:hover { }
.moxtra-chat-selected:active { }</style><style type="text/css">.moxtra-chooser { width: 100px; height: 35px; border: solid 1px navy; box-shadow: 2px 2px 3px #535353; border-radius: 5px; cursor: pointer;
  background-image: url('https://www.moxtra.com/api/images/logo-binder2.png'); }
.moxtra-chooser:hover { border: solid navy 2px; background-position: 2px 2px; }
.moxtra-chooser:active { background-position: 0 2px; }
.moxtra-chooser-selected { }
.moxtra-chooser-selected:hover { }
.moxtra-chooser-selected:active { }</style><style type="text/css">.moxtra-pagechooser { width: 69px; height: 35px; border: solid 1px navy; box-shadow: 2px 2px 3px #535353; border-radius: 5px; cursor: pointer;
  background-image: url('https://www.moxtra.com/api/images/logo-page.png'); }
.moxtra-pagechooser:hover { border: solid navy 2px; background-position: 2px 2px; }
.moxtra-pagechooser:active { background-position: 0 2px; }
.moxtra-pagechooser-selected { }
.moxtra-pagechooser-selected:hover { }
.moxtra-pagechooser-selected:active { }</style></head>
<body onload="get_access_token()">



    
        <meta charset="UTF-8">

        <!-- Include Moxtra JavaScript Library -->
        <script type="text/javascript" src="./Linkguist_files/moxtra-latest.js" id="moxtrajs"></script>
        <script src="./Linkguist_files/jquery.min.js"></script>
        
        <!-- Authenticate/Initialize and get the "Access Token" for the user -->
        <!-- Refer to the doc at https://developer.moxtra.com/docs/docs-oauth/#uniqueid to authenticate user based on UniqueID Method -->
        <!-- For other authentication methods and overview refer to the doc at https://developer.moxtra.com/docs/docs-authentication/ -->
        <!-- In this example user is authenticated and access token is passed as a URL parameter -->
        <!-- JS function to get access token from the URL parameter -->
        <script type="text/javascript">
            // function getURLParameter(name) {
            //     return decodeURIComponent((new RegExp('[?|&]' + name + '=' + '([^&;]+?)(&|#|;|$)').exec(location.search)||[,""])[1].replace(/\+/g, '%20'))||null
            // }
            // function parseURI() {
            //     var uri = window.location.hash.substring(1);
            //     var elements = uri.split('&');
            //     var data = new Object();
            //     for(i = 0; i < elements.length; i++) {
            //         var cur = elements[i].split('=');
            //         data[cur[0]] = cur[1];
            //     }
            //     return data;
            // }
            function get_binder_contents() {
                $.ajax({
                    url: "https://apisandbox.moxtra.com/v1/BTEahwWvVdcHDI9NaaqOX8J/conversations",
                    success: function(data, textStatus, jqXHR) {
                    alert(data.actor.displayName);
                    },
                });
            }



            function get_access_token() { 
                var access_token;
                var client_id = "lZzzYnnz8No";
                var client_secret = "tC87sYCKZ1o";
                var uniqueid = "user3";
                var timestamp = new Date().getTime();
                //var hash = CryptoJS.HmacSHA256(client_id + "" + uniqueid + "" + timestamp, client_secret);
                //var signature = rtrim(strtr(CryptoJS.enc.Base64.stringify(hash), '+/', '-_'), '=');
                var firstname = "Naman";

                $.ajax({
                    method: "POST",
                    url: "https://apisandbox.moxtra.com/oauth/token",
                    data: {
                    client_id: client_id,
                    client_secret: client_secret,
                    grant_type: "http://www.moxtra.com/auth_uniqueid",
                    uniqueid: uniqueid,
                    timestamp: timestamp,
                    //signature: signature,
                    firstname: firstname
                    },
                    async: false,
                    success: function(data, textStatus, jqXHR) {
                        access_token = data.access_token;
                        alert(access_token);
                        },
                    error: function (jqXHR, textStatus, errorThrown) {
                        console.log(textStatus);
                        }
                        });
            
                if (access_token) {
                    // Initialize Moxtra SDK Object
                    var options = {
                        mode: "sandbox", 
                        client_id: client_id, //
                        access_token: access_token,
                        invalid_token: function(event) {
                            //Triggered when the access token is expired or invalid
                            alert("Access Token expired for session id: " + event.session_id);
                        }
                    };
                    Moxtra.init(options);
                }
                else {
                    //Authenticate and get access token for the user before proceeding further
                    console.log ("No access token found");
                }
            }
        
        </script>
        
        <!-- Start Chat Function -->
        <script type="text/javascript">
        function start_chat () {
        console.log("We've Started")            
            var chat_options = {
                //unique id of the users who will be part of the chat. These users should already exist in Moxtra.
                //binder_id: "linkguist",
                unique_id: "user1",
                iframe: true,
                //ID of the HTML tag within which the chat window will show up. Refer https://developer.grouphour.com/moxo/docs-js-sdk/#conversation
                tagid4iframe: "chat-container",
                iframewidth: "1000px",
                iframeheight: "750px",
                autostart_meet: true,
                autostart_note: true,
                extension: { "show_dialogs": { "member_invite": true } },
                start_chat: function(event) {
                        alert("Chat started.")
                    console.log("Chat started binder ID: " + event.binder_id);
                    //Your application server can upload files to draw using the binder_id and access_token
                },
                start_meet: function(event) {
                    console.log("Meet started session key: " + event.session_key + " session id: " + event.session_id);
                },
                end_meet: function(event) {
                    console.log("Meet end event");
                },
                invite_member: function(event) {
                    console.log("Invite member into binder Id: " + event.binder_id);
                },
                request_note: function(event) {
                    console.log("Note start request");
                },
                error: function(event) {
                    console.log("Chat error code: " + event.error_code + " error message: " + event.error_message);
                }
            };            
            Moxtra.chat(chat_options);
        }
        </script>
            
    
    
        <h3><a id="getToken" href="javascript:start_chat();">Moxtra Chat</a></h3>
        <h3><a href="javascript:get_binder_contents();">Get Name</a></h3>
        <div id="chat-container"><div style="width: 1000px; height: 750px; margin: 10px 0px; border: 1px solid rgb(172, 172, 172); box-shadow: rgba(0, 0, 0, 0.2) 0px 4px 16px;"><iframe src="./Linkguist_files/saved_resource.html" frameborder="0" allowtransparency="true" allowfullscreen="" webkitallowfullscreen="" mozallowfullscreen="" style="width: 100%; height: 100%; border: none; background-color: transparent;"></iframe></div></div>

    




</body></html>